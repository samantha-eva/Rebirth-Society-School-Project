{% extends 'base.html.twig' %}

{% block title %}Catalogue{% endblock %}

{% block body %}
<main class="container mx-auto px-4 py-8 max-w-7xl">

  <div class="text-center mb-12">
    <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-4 tracking-tight">
      Catalogue Vid√©o
    </h1>
    <p class="text-lg text-gray-300 leading-relaxed max-w-3xl mx-auto">
      D√©couvrez nos cours individuels et packs exclusifs pour progresser √† votre rythme.
    </p>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
    {% for el in elements %}
      <div class="bg-black rounded-2xl shadow-xl overflow-hidden border border-gray-800 group flex flex-col hover:shadow-2xl transition">
        
        {# Image de couverture #}
        <div class="relative">
          <div class="w-full bg-center bg-no-repeat aspect-[3/4] bg-cover"
               style="background-image: url('{{ asset('uploads/packs/' ~ el.image) }}');">
          </div>

          {# Overlay hover #}
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-70 group-hover:opacity-90 transition-all duration-300"></div>
          
          {# Badge type en dor√©/noir #}
          <div class="absolute top-4 left-4 flex items-center gap-2">
            {% if el.type == 'pack' %}
              <span class="px-3 py-1 text-xs font-semibold uppercase rounded-full bg-[var(--gold,#f9b006)] text-black shadow">
                üéÅ Pack
              </span>
            {% else %}
              <span class="px-3 py-1 text-xs font-semibold uppercase rounded-full bg-[var(--gold,#f9b006)] text-black shadow">
                üé• Vid√©o
              </span>
            {% endif %}
          </div>

          {# Prix en dor√© bien visible #}
          <div class="absolute top-4 right-4">
            <span class="px-3 py-1 text-sm font-bold rounded-full bg-[var(--gold,#f9b006)] text-black shadow-lg">
              {{ el.price }} ‚Ç¨
            </span>
          </div>

          {# Titre + d√©tails en bas de l‚Äôimage #}
          <div class="absolute bottom-4 left-4 right-4 space-y-2">
            <h3 class="text-white text-xl font-bold drop-shadow">{{ el.nom }}</h3>

            {% if el.type == 'pack' %}
              <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-gray-900/80 text-[var(--gold,#f9b006)] border border-[var(--gold,#f9b006)]">
                üì¶ {{ el.videos|length }} vid√©os incluses
              </span>
            {% else %}
              <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-gray-900/80 text-[var(--gold,#f9b006)] border border-[var(--gold,#f9b006)]">
                üìÇ {{ el.categorie.name }}
              </span>
            {% endif %}
          </div>
        </div>
        {% if el.type == 'pack' %}
        {# Bouton action dor√©/noir #}
        <div class="mt-auto p-4 text-center">
          <button class="bg-[var(--gold,#f9b006)] text-black px-5 py-2 rounded-full font-semibold hover:bg-yellow-400 transition">
             D√©couvrir le pack
          </button>
        </div>
         {% else %}
          <div class="mt-auto p-4 text-center">
          <button class="bg-[var(--gold,#f9b006)] text-black px-5 py-2 rounded-full font-semibold hover:bg-yellow-400 transition">
             D√©couvrir la vid√©o
          </button>
        </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {# Pagination simple #}
  <div class="flex justify-center gap-2 mt-12">
    {% if page > 1 %}
      <a href="{{ path('catalogue', {'page': page - 1}) }}"
         class="px-4 py-2 bg-black text-[var(--gold,#f9b006)] border border-[var(--gold,#f9b006)] rounded-lg hover:bg-[var(--gold,#f9b006)] hover:text-black transition">
        ‚¨Ö Pr√©c√©dent
      </a>
    {% endif %}

    {% for p in 1..pages %}
      <a href="{{ path('catalogue', {'page': p}) }}"
         class="px-4 py-2 rounded-lg border {% if p == page %}bg-[var(--gold,#f9b006)] text-black font-bold{% else %}bg-black text-[var(--gold,#FFD700)] border-[var(--gold,#FFD700)] hover:bg-[var(--gold,#FFD700)] hover:text-black{% endif %}">
        {{ p }}
      </a>
    {% endfor %}

    {% if page < pages %}
      <a href="{{ path('catalogue', {'page': page + 1}) }}"
         class="px-4 py-2 bg-black text-[var(--gold,#FFD700)] border border-[var(--gold,#f9b006)] rounded-lg hover:bg-[var(--gold,#FFD700)] hover:text-black transition">
        Suivant ‚û°
      </a>
    {% endif %}
  </div>

</main>
{% endblock %}
